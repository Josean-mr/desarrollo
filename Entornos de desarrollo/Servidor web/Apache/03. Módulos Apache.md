El servidor de Apache dispone de módulos que se pueden utilizar para la gestión y disponibilidad del contenido web.
# Grupos de módulos
Los módulos de Apache se dividen en diferentes grupos según su funcionalidad.
## 1. Módulos de autenticación y autorización:
- **mod_auth_basic**: permite configurar usuarios y contraseñas en un archivo .htpasswd. Se utiliza para proteger directorios y recursos especificos.
<font style="color:green; font-weight:bold">Ejemplo</div>:
```bash
<Directory "/ruta/del/directorio/protegido">
	AuthType Basic
	AuthName "Área restringida"
	AuthUserFile /ruta/al/archivo/.htpasswd
	Require valid-user
</Directory>
```
## 2. Módulos de compresión:
- **mod_deflate**: permite establecer parámetros como los tipos de archivos a comprimir y el nivel de compresión. Al comprimir el contenido antes de enviarlo al cliente, se reduce el tiempo de carga y el ancho de banda.
<font style="color:green; font-weight:bold">Ejemplo</div>:
```bash
AddOutputFilterByType DEFLATE text/html text/plain text/xml
```
## 3. Módulos de seguridad:
- **mod_security**: para definir reglas de seguridad para filtrar y bloquear peticiones maliciosas. Da protección al servidor contra ataques como inyecciones SQL o ataques de fuerza bruta.
<font style="color:green; font-weight:bold">Ejemplo</div>:
```bash
SecRuleEngine On
SecRule REQUEST_METHOD "^(GET|POST)$" \
	"id:1,\
	phase:1,\
	pass,\
	t:none,\
	nolog,\
	ctl:requestBodyAccess=On,\
	ctl:auditLogParts=+E"
```
## 4. Módulos de caché:
- **mod_cache**: Ofrece directivas para controlar la caché, como el tiempo de vida del objeto almacenado en caché, almacenando respuestas del servidor para reducir el tiempo de carga de las páginas web.
# Instalación de módulos
En la ruta /etc/apache2 (Server Root) tenemos dos subdirectorios:
- **mods-available**: Los módulos disponibles.
- **mods-enabled**: Los módulos que están activados.
## 1. Verificar disponibilidad
Se puede verificar la disponibilidad de la siguiente manera:
1. Comprobando si se está activado:
<font style="color:green; font-weight:bold">Ejemplo</div> en el que se verifica si el módulo **rewrite** se encuentra activado:
```bash
ls -l /etc/apache2/mods-enabled | grep rewrite
```
También se puede comprobar con el comando "apache2ctl -M", que permite ver que módulos se están ejecutando en memoria:
```bash
sudo apache2ctl -M | grep rewrite
```
 2. Verificando si el módulo está disponible:
<font style="color:green; font-weight:bold">Ejemplo</div> (verificar módulo **mod-rewrite**):
```bash
ls -l /etc/apache2/mods-available | grep rewrite
```
## 2. Instalación del módulo
1. Si el módulo no se encuentra disponible (ver punto 1. Verificar disponibilidad), se puede instalar mediante el comando:
```bash
sudo apt-get install libapache2-mod-rewrite
```
## 3. Activar el módulo
1. Se puede activar el módulo mediante el comando:
```bash
sudo a2enmod rewrite
```
- Para desactivar el módulo:
```bash
sudo a2dismod rewrite
```
## 4. Configurar el módulo
Hay dos métodos:
a) Mediante el archivo <font style="color:#08f; font-weight:bold">.htaccess</font> en el directorio raíz del sitio web. **Este archivo se debe crear**.
- Ubicación por defecto:
```bash
/var/www/html/.htaccess
```
b) Mediante el fichero de configuración de Apache:
```bash
/etc/apache2/apache2.conf
```
## 5. Reiniciar el servicio
Se ha de reiniciar el servicio para que los cambios surjan efecto.
```bash
sudo systemctl restart apache2
```